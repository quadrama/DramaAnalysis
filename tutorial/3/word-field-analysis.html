<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Word Field Analysis | DramaAnalysis</title>
  <meta name="description" content="9 Word Field Analysis | DramaAnalysis" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Word Field Analysis | DramaAnalysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Word Field Analysis | DramaAnalysis" />
  
  
  

<meta name="author" content="Nils Reiter" />


<meta name="date" content="2019-06-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="stage-directions.html">
<link rel="next" href="advanced-text-analysis.html">
<script src="assets/jquery-2.2.3/jquery.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#classes"><i class="fa fa-check"></i><b>1.1</b> Classes</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Basics</a><ul>
<li class="chapter" data-level="2.1" data-path="basics.html"><a href="basics.html#r-basics"><i class="fa fa-check"></i><b>2.1</b> R Basics</a><ul>
<li class="chapter" data-level="2.1.1" data-path="basics.html"><a href="basics.html#variable-assignment"><i class="fa fa-check"></i><b>2.1.1</b> Variable assignment</a></li>
<li class="chapter" data-level="2.1.2" data-path="basics.html"><a href="basics.html#function-calls"><i class="fa fa-check"></i><b>2.1.2</b> Function calls</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basics.html"><a href="basics.html#magrittr"><i class="fa fa-check"></i><b>2.2</b> magrittr Pipes / <code>%&gt;%</code></a></li>
</ul></li>
<li class="part"><span><b>I DramaAnalysis</b></span></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a><ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#origin-tei-xml"><i class="fa fa-check"></i><b>3.1</b> Origin: TEI-XML</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#preprocessed-data"><i class="fa fa-check"></i><b>3.2</b> Preprocessed data</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#sample-data"><i class="fa fa-check"></i><b>3.2.1</b> Sample data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#installing-corpora"><i class="fa fa-check"></i><b>3.3</b> Installing corpora</a></li>
<li class="chapter" data-level="3.4" data-path="data.html"><a href="data.html#collection-data"><i class="fa fa-check"></i><b>3.4</b> Collection data</a><ul>
<li class="chapter" data-level="3.4.1" data-path="data.html"><a href="data.html#defining-collections"><i class="fa fa-check"></i><b>3.4.1</b> Defining collections</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="who-how-much.html"><a href="who-how-much.html"><i class="fa fa-check"></i><b>4</b> Who’s talking how much?</a><ul>
<li class="chapter" data-level="4.1" data-path="who-how-much.html"><a href="who-how-much.html#format"><i class="fa fa-check"></i><b>4.1</b> Character names instead of identifiers</a></li>
<li class="chapter" data-level="4.2" data-path="who-how-much.html"><a href="who-how-much.html#stacked-bar-plot"><i class="fa fa-check"></i><b>4.2</b> Stacked bar plot</a></li>
<li class="chapter" data-level="4.3" data-path="who-how-much.html"><a href="who-how-much.html#collection-analysis"><i class="fa fa-check"></i><b>4.3</b> Collection analysis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="who-how-often.html"><a href="who-how-often.html"><i class="fa fa-check"></i><b>5</b> Who’s talking how often?</a><ul>
<li class="chapter" data-level="5.1" data-path="who-how-often.html"><a href="who-how-often.html#when-are-characters-talking"><i class="fa fa-check"></i><b>5.1</b> When are characters talking?</a></li>
<li class="chapter" data-level="5.2" data-path="who-how-often.html"><a href="who-how-often.html#adding-act-boundaries"><i class="fa fa-check"></i><b>5.2</b> Adding act boundaries</a></li>
<li class="chapter" data-level="5.3" data-path="who-how-often.html"><a href="who-how-often.html#who-how-often-collection"><i class="fa fa-check"></i><b>5.3</b> Collection analysis</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="configuration.html"><a href="configuration.html"><i class="fa fa-check"></i><b>6</b> Configuration</a><ul>
<li class="chapter" data-level="6.1" data-path="configuration.html"><a href="configuration.html#matrices"><i class="fa fa-check"></i><b>6.1</b> Matrices</a><ul>
<li class="chapter" data-level="6.1.1" data-path="configuration.html"><a href="configuration.html#filter"><i class="fa fa-check"></i><b>6.1.1</b> Filtering unimportant characters</a></li>
<li class="chapter" data-level="6.1.2" data-path="configuration.html"><a href="configuration.html#normalization"><i class="fa fa-check"></i><b>6.1.2</b> Normalization</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="configuration.html"><a href="configuration.html#copresence"><i class="fa fa-check"></i><b>6.2</b> Copresence</a><ul>
<li class="chapter" data-level="6.2.1" data-path="configuration.html"><a href="configuration.html#as-heatmap"><i class="fa fa-check"></i><b>6.2.1</b> As Heatmap</a></li>
<li class="chapter" data-level="6.2.2" data-path="configuration.html"><a href="configuration.html#network"><i class="fa fa-check"></i><b>6.2.2</b> As Network</a></li>
<li class="chapter" data-level="6.2.3" data-path="configuration.html"><a href="configuration.html#network-properties"><i class="fa fa-check"></i><b>6.2.3</b> Network properties</a></li>
<li class="chapter" data-level="6.2.4" data-path="configuration.html"><a href="configuration.html#graph-export"><i class="fa fa-check"></i><b>6.2.4</b> Graph Export</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="character-exchange.html"><a href="character-exchange.html"><i class="fa fa-check"></i><b>7</b> Character Exchange</a><ul>
<li class="chapter" data-level="7.1" data-path="character-exchange.html"><a href="character-exchange.html#hamming-distance"><i class="fa fa-check"></i><b>7.1</b> Hamming Distance</a><ul>
<li class="chapter" data-level="7.1.1" data-path="character-exchange.html"><a href="character-exchange.html#normalizedhamming"><i class="fa fa-check"></i><b>7.1.1</b> NormalizedHamming</a></li>
<li class="chapter" data-level="7.1.2" data-path="character-exchange.html"><a href="character-exchange.html#trilcke"><i class="fa fa-check"></i><b>7.1.2</b> Trilcke</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="character-exchange.html"><a href="character-exchange.html#corpus-analysis"><i class="fa fa-check"></i><b>7.2</b> Corpus Analysis</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="stage-directions.html"><a href="stage-directions.html"><i class="fa fa-check"></i><b>8</b> Stage Directions</a></li>
<li class="chapter" data-level="9" data-path="word-field-analysis.html"><a href="word-field-analysis.html"><i class="fa fa-check"></i><b>9</b> Word Field Analysis</a><ul>
<li class="chapter" data-level="9.1" data-path="word-field-analysis.html"><a href="word-field-analysis.html#single-word-field"><i class="fa fa-check"></i><b>9.1</b> Single word field</a></li>
<li class="chapter" data-level="9.2" data-path="word-field-analysis.html"><a href="word-field-analysis.html#multiple-word-fields"><i class="fa fa-check"></i><b>9.2</b> Multiple Word Fields</a><ul>
<li class="chapter" data-level="9.2.1" data-path="word-field-analysis.html"><a href="word-field-analysis.html#bar-plot-by-character"><i class="fa fa-check"></i><b>9.2.1</b> Bar plot by character</a></li>
<li class="chapter" data-level="9.2.2" data-path="word-field-analysis.html"><a href="word-field-analysis.html#bar-plot-by-field"><i class="fa fa-check"></i><b>9.2.2</b> Bar plot by field</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="word-field-analysis.html"><a href="word-field-analysis.html#dictionary-based-distance"><i class="fa fa-check"></i><b>9.3</b> Dictionary Based Distance</a></li>
<li class="chapter" data-level="9.4" data-path="word-field-analysis.html"><a href="word-field-analysis.html#development-over-the-course-of-the-play"><i class="fa fa-check"></i><b>9.4</b> Development over the course of the play</a><ul>
<li class="chapter" data-level="9.4.1" data-path="word-field-analysis.html"><a href="word-field-analysis.html#individual-characters"><i class="fa fa-check"></i><b>9.4.1</b> Individual characters</a></li>
<li class="chapter" data-level="9.4.2" data-path="word-field-analysis.html"><a href="word-field-analysis.html#comparing-characters"><i class="fa fa-check"></i><b>9.4.2</b> Comparing characters</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="word-field-analysis.html"><a href="word-field-analysis.html#corpus-analysis-1"><i class="fa fa-check"></i><b>9.5</b> Corpus Analysis</a></li>
<li class="chapter" data-level="9.6" data-path="word-field-analysis.html"><a href="word-field-analysis.html#enriching-the-word-fields-distributionally"><i class="fa fa-check"></i><b>9.6</b> Enriching the word fields distributionally</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="advanced-text-analysis.html"><a href="advanced-text-analysis.html"><i class="fa fa-check"></i><b>10</b> Advanced Text Analysis</a><ul>
<li class="chapter" data-level="10.1" data-path="advanced-text-analysis.html"><a href="advanced-text-analysis.html#when-are-characters-mentioned"><i class="fa fa-check"></i><b>10.1</b> When are characters mentioned?</a></li>
<li class="chapter" data-level="10.2" data-path="advanced-text-analysis.html"><a href="advanced-text-analysis.html#who-mentions-whom"><i class="fa fa-check"></i><b>10.2</b> Who mentions whom?</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="resterampe.html"><a href="resterampe.html"><i class="fa fa-check"></i><b>11</b> Resterampe</a><ul>
<li class="chapter" data-level="11.0.1" data-path="resterampe.html"><a href="resterampe.html#character-meta-data"><i class="fa fa-check"></i><b>11.0.1</b> Character meta data</a></li>
<li class="chapter" data-level="11.0.2" data-path="resterampe.html"><a href="resterampe.html#character-groups"><i class="fa fa-check"></i><b>11.0.2</b> Character groups</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DramaAnalysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="word-field-analysis" class="section level1">
<h1><span class="header-section-number">9</span> Word Field Analysis</h1>
<p>What we consider a word field here may differ from specific uses in linguistics. In this context, a word field is a list of words that belong to a common theme / topic / semantic group. Multiple word fields can be assembled to create a dictionary. On a technical level, what we describe in the following works for arbitrary lists of words. A semantic relation between the words is technically not required. Thus, the following pieces of code can be used with arbitrary word lists.</p>
<p>For <strong>demo purposes</strong> (this is really a toy example), we will define the word field of <code>Love</code> as containing the words <code>Liebe</code> (love) and <code>Herz</code> (heart).
In R, we can put them in a character vector, and we use lemmas:</p>
<pre class="sourceCode r"><code class="sourceCode r">wf_love &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;liebe&quot;</span>, <span class="st">&quot;herz&quot;</span>)</code></pre>
<p>We will test this word field on Emilia Galotti, which should be about love.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;rksp.0&quot;</span>)</code></pre>
<div id="single-word-field" class="section level2">
<h2><span class="header-section-number">9.1</span> Single word field</h2>
<p>The core of the word field analysis is collecting statistics about a dictionary. Therefore, we use the function called <code>dictionaryStatisticsSingle()</code> (single, because we only want to analyse a single word field):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dictionaryStatisticsSingle</span>(
  rksp<span class="fl">.0</span>,              <span class="co"># the text we want to process</span>
  <span class="dt">wordfield=</span>wf_love    <span class="co"># the word field</span>
)</code></pre>
<pre><code>##    corpus  drama        character  x
## 1    test rksp.0           angelo  0
## 2    test rksp.0          appiani  0
## 3    test rksp.0         battista  0
## 4    test rksp.0     camillo_rota  0
## 5    test rksp.0  claudia_galotti  2
## 6    test rksp.0            conti  2
## 7    test rksp.0 der_kammerdiener  0
## 8    test rksp.0        der_prinz 10
## 9    test rksp.0           emilia  5
## 10   test rksp.0        marinelli  8
## 11   test rksp.0          odoardo  7
## 12   test rksp.0           orsina  5
## 13   test rksp.0            pirro  0</code></pre>
<p>What this table shows us the number of times the characters in the play use words that appear in this list. By default, these are absolute numbers.</p>
<p>We can visualise these counts in a simple bar chart:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># retrieve counts and replace character ids by names</span>
dstat &lt;-<span class="st"> </span><span class="kw">dictionaryStatisticsSingle</span>(rksp<span class="fl">.0</span>, <span class="dt">wordfield =</span> wf_love) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">format</span>(rksp<span class="fl">.0</span>)

<span class="co"># remove figures not using these words at all</span>
dstat &lt;-<span class="st"> </span>dstat[dstat<span class="op">$</span>x<span class="op">&gt;</span><span class="dv">0</span>,]

<span class="co"># create a bar plot</span>
<span class="kw">barplot</span>(dstat<span class="op">$</span>x,                      <span class="co"># what to plot</span>
        <span class="dt">names.arg =</span> dstat<span class="op">$</span>character,  <span class="co"># x axis labels</span>
        <span class="dt">las=</span><span class="dv">2</span>                         <span class="co"># turn axis labels</span>
)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<p>Apparently, the prince and Marinelli are mentioning these words a lot more than the other characters.</p>
<p>When comparing characters, it often (but not always) makes sense to normalize the counts according to the total number of spoken words by a character. This can be enabled by setting the argument <code>normalizeByFigure=TRUE</code>. This will divide the number of words in this field by the total number of words a character speaks.</p>
<pre class="sourceCode r"><code class="sourceCode r">dstat &lt;-<span class="st"> </span><span class="kw">dictionaryStatisticsSingle</span>(rksp<span class="fl">.0</span>, <span class="dt">wordfield=</span>wf_love,
  <span class="dt">normalizeByFigure =</span> <span class="ot">TRUE</span>   <span class="co"># apply normalization</span>
) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">format</span>(rksp<span class="fl">.0</span>)         <span class="co"># reformat character names</span>

<span class="co"># remove figures not using these words at all</span>
dstat &lt;-<span class="st"> </span>dstat[dstat<span class="op">$</span>x<span class="op">&gt;</span><span class="dv">0</span>,]

<span class="kw">barplot</span>(dstat<span class="op">$</span>x, 
        <span class="dt">names.arg =</span> dstat<span class="op">$</span>character, 
        <span class="dt">las=</span><span class="dv">2</span>            
)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
</div>
<div id="multiple-word-fields" class="section level2">
<h2><span class="header-section-number">9.2</span> Multiple Word Fields</h2>
<p>The function <code>dictionaryStatistics()</code> can be used to analyse multiple dictionaries at once. To this end, dictionaries are represented as lists of character vectors. The (named) outer list contains the keywords, the vectors are just words associated with the keyword.</p>
<p>New dictionaries can be easily created like this:</p>
<pre class="sourceCode r"><code class="sourceCode r">wf &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">Liebe=</span><span class="kw">c</span>(<span class="st">&quot;liebe&quot;</span>,<span class="st">&quot;herz&quot;</span>,<span class="st">&quot;schmerz&quot;</span>), <span class="dt">Hass=</span><span class="kw">c</span>(<span class="st">&quot;hass&quot;</span>,<span class="st">&quot;hassen&quot;</span>))</code></pre>
<p>This dictionary contains the two entries <code>Liebe</code> (love) and <code>Hass</code> (hate), with 3 respective 2 entries. Dictionaries can be created in code, like shown above. In addition, the function <code>loadFields()</code> can be used to download dictionary content from a URL or a directory. By default, the function loads <a href="https://github.com/quadrama/metadata/tree/master/fields/">this dictionary</a> from GitHub (that we used in publications), for the keywords <code>Liebe</code> and <code>Familie</code> (family). Since version 2.3.0, this dictionary is included in the package as <code>base_dictionary</code> and can be used right away (without internet connection). It is also the default dictionary used by <code>dictionaryStatistics()</code>.</p>
<p>The function <code>loadFields()</code> offers parameters to load from different URLs via http or to load from plain text files that are stored locally. The latter can be achieved by specifying the directory as <code>baseurl</code>. Entries for each keyword should then be stored in a file named like the keyword, and ending with <code>txt</code> (by default, can be overwritten). See <code>?loadFields</code> for details. Some of the options can also be specified through <code>dictionaryStatistics()</code>, as exemplified below.</p>
<p>The following examples use the <code>base_dictionary</code>, i.e., a specific version of the fields we have been using in QuaDramA.</p>
<pre class="sourceCode r"><code class="sourceCode r">dstat &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(
  rksp<span class="fl">.0</span>,  <span class="co"># the text</span>
  <span class="dt">fieldnames =</span> <span class="co"># fields we want to measure (from base_dictionary)</span>
    <span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>, <span class="st">&quot;Familie&quot;</span>, <span class="st">&quot;Ratio&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Religion&quot;</span>),
  <span class="dt">normalizeByFigure =</span> <span class="ot">TRUE</span>,   <span class="co"># normalization by figure</span>
  <span class="dt">normalizeByField =</span> <span class="ot">TRUE</span>     <span class="co"># normalization by field</span>
)
dstat</code></pre>
<pre><code>##    corpus  drama        character        Liebe      Familie        Ratio
## 1    test rksp.0           angelo 4.707211e-05 6.061341e-05 6.828362e-05
## 2    test rksp.0          appiani 8.450546e-05 1.450870e-04 6.537871e-05
## 3    test rksp.0         battista 0.000000e+00 1.349619e-04 0.000000e+00
## 4    test rksp.0     camillo_rota 1.003613e-04 1.292324e-04 4.367575e-04
## 5    test rksp.0  claudia_galotti 7.467219e-05 2.307678e-04 3.899548e-05
## 6    test rksp.0            conti 1.531692e-04 5.379043e-05 3.635835e-05
## 7    test rksp.0 der_kammerdiener 0.000000e+00 0.000000e+00 0.000000e+00
## 8    test rksp.0        der_prinz 6.896790e-05 6.660598e-05 5.002301e-05
## 9    test rksp.0           emilia 9.004061e-05 3.304367e-04 4.702121e-05
## 10   test rksp.0        marinelli 7.894143e-05 1.524759e-04 4.580552e-05
## 11   test rksp.0          odoardo 5.635355e-05 2.257573e-04 6.267303e-05
## 12   test rksp.0           orsina 5.028230e-05 1.109950e-04 5.314227e-05
## 13   test rksp.0            pirro 0.000000e+00 1.871398e-04 5.059705e-05
##           Krieg     Religion
## 1  5.267594e-05 0.000000e+00
## 2  4.728281e-05 0.000000e+00
## 3  0.000000e+00 0.000000e+00
## 4  8.423181e-05 0.000000e+00
## 5  4.595895e-05 8.209574e-05
## 6  2.337322e-05 0.000000e+00
## 7  0.000000e+00 0.000000e+00
## 8  2.894188e-05 3.791218e-05
## 9  3.022792e-05 9.651721e-05
## 10 3.943715e-05 1.859773e-05
## 11 4.992433e-05 5.679295e-05
## 12 3.014373e-05 1.184596e-05
## 13 2.439500e-05 9.586809e-05</code></pre>
<p>The variable <code>dstat</code> now contains multiple columns, one for each word field. We have been using the option <code>normalizeByFigure</code> before. When comparing multiple fields, it often happens that they have a different size (i.e., different number of words). In this case, it makes sense to <em>also</em> normalize with the number of words in the word field. This is achieved by <code>normalizeByField=TRUE</code>. This makes the numbers very small, but they should be used in comparison anyway.</p>
<div id="bar-plot-by-character" class="section level3">
<h3><span class="header-section-number">9.2.1</span> Bar plot by character</h3>
<p>It is now straightforward to show the distribution of fields for a single character:</p>
<pre class="sourceCode r"><code class="sourceCode r">mat &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dstat)

<span class="kw">barplot</span>(mat[<span class="dv">9</span>,],     <span class="co"># we select Emilia&#39;s line</span>
        <span class="dt">main=</span><span class="st">&quot;Emilia&#39;s speech&quot;</span>,
        <span class="dt">names.arg=</span><span class="kw">colnames</span>(mat)
)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
</div>
<div id="bar-plot-by-field" class="section level3">
<h3><span class="header-section-number">9.2.2</span> Bar plot by field</h3>
<p>Conversely, we can also show who uses words of a certain field how often:</p>
<pre class="sourceCode r"><code class="sourceCode r">dstat &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(
  rksp<span class="fl">.0</span>,  <span class="co"># the text</span>
  <span class="dt">fieldnames =</span> <span class="co"># fields we want to measure (from base_dictionary)</span>
    <span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>, <span class="st">&quot;Familie&quot;</span>, <span class="st">&quot;Ratio&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Religion&quot;</span>),
  <span class="dt">normalizeByFigure =</span> <span class="ot">TRUE</span>,   <span class="co"># normalization by figure</span>
  <span class="dt">normalizeByField =</span> <span class="ot">TRUE</span>     <span class="co"># normalization by field</span>
) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">format</span>(rksp<span class="fl">.0</span>)
  
mat &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dstat)

<span class="kw">par</span>(<span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">1</span>))

<span class="kw">barplot</span>(mat[,<span class="dv">1</span>],                  <span class="co"># Select the row for &#39;love&#39;</span>
        <span class="dt">main=</span><span class="st">&quot;Use of love words&quot;</span>, <span class="co"># title for plot</span>
        <span class="dt">beside =</span> <span class="ot">TRUE</span>,            <span class="co"># not stacked</span>
        <span class="dt">names.arg =</span> dstat<span class="op">$</span>character,   <span class="co"># x axis labels</span>
        <span class="dt">las=</span><span class="dv">2</span>                     <span class="co"># rotation for labels</span>
)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
</div>
</div>
<div id="dictionary-based-distance" class="section level2">
<h2><span class="header-section-number">9.3</span> Dictionary Based Distance</h2>
<p>Technically, the output of <code>dictionaryStatistics()</code> is a <code>data.frame</code>. This is suitable for most uses. In some cases, however, it’s more suited to work with a matrix that only contains the raw numbers (i.e., number of family words). Calculating character distance based on dictionaries, for instance. For these cases, the package provides an S3 method that extracts the numeric part of the data.frame and creates a matrix. We have used this function <code>as.matrix()</code> already above.</p>
<p>The matrix doesn’t have row names by default. The snippet below can be used to add row names.</p>
<pre class="sourceCode r"><code class="sourceCode r">ds &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(rksp<span class="fl">.0</span>, 
                            <span class="dt">fieldnames=</span><span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>, <span class="st">&quot;Familie&quot;</span>, <span class="st">&quot;Ratio&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Religion&quot;</span>),
                            <span class="dt">normalizeByFigure=</span><span class="ot">TRUE</span>)
m &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(ds)
<span class="kw">rownames</span>(m) &lt;-<span class="st"> </span>ds<span class="op">$</span>character
m</code></pre>
<pre><code>##                        Liebe     Familie       Ratio       Krieg
## angelo           0.004424779 0.004424779 0.007374631 0.005899705
## appiani          0.007943513 0.010591350 0.007060900 0.005295675
## battista         0.000000000 0.009852217 0.000000000 0.000000000
## camillo_rota     0.009433962 0.009433962 0.047169811 0.009433962
## claudia_galotti  0.007019186 0.016846046 0.004211511 0.005147403
## conti            0.014397906 0.003926702 0.003926702 0.002617801
## der_kammerdiener 0.000000000 0.000000000 0.000000000 0.000000000
## der_prinz        0.006482982 0.004862237 0.005402485 0.003241491
## emilia           0.008463817 0.024121879 0.005078290 0.003385527
## marinelli        0.007420495 0.011130742 0.004946996 0.004416961
## odoardo          0.005297234 0.016480283 0.006768687 0.005591524
## orsina           0.004726536 0.008102633 0.005739365 0.003376097
## pirro            0.000000000 0.013661202 0.005464481 0.002732240
##                      Religion
## angelo           0.0000000000
## appiani          0.0000000000
## battista         0.0000000000
## camillo_rota     0.0000000000
## claudia_galotti  0.0046794572
## conti            0.0000000000
## der_kammerdiener 0.0000000000
## der_prinz        0.0021609941
## emilia           0.0055014812
## marinelli        0.0010600707
## odoardo          0.0032371984
## orsina           0.0006752194
## pirro            0.0054644809</code></pre>
<p>Every character is now represented with five numbers, which can be interpreted as a vector in five-dimensional space. This means, we can easily apply distance metrics supplied by the function <code>dist()</code> (from the default package <code>stats</code>). By default, <code>dist()</code> calculates <a href="https://en.wikipedia.org/wiki/Euclidean_distance">Euclidean distance</a>.</p>
<pre class="sourceCode r"><code class="sourceCode r">cdist &lt;-<span class="st"> </span><span class="kw">dist</span>(m)
<span class="co"># output not shown</span></code></pre>
<p>The resulting data structure is similar to the one in the weighted configuration matrix, which means everything from <a href="configuration.html#network">Section 5.2.2</a> can be applied here.
In particular, we can convert these distances into a network:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(igraph)
g &lt;-<span class="st"> </span><span class="kw">graph_from_adjacency_matrix</span>(<span class="kw">as.matrix</span>(cdist), 
                                 <span class="dt">weighted=</span><span class="ot">TRUE</span>,     <span class="co"># weighted graph</span>
                                 <span class="dt">mode=</span><span class="st">&quot;undirected&quot;</span>, <span class="co"># no direction</span>
                                 <span class="dt">diag=</span><span class="ot">FALSE</span>         <span class="co"># no looping edges</span>
                                )</code></pre>
<p>This network can of course be visualised again.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Now we plot</span>
<span class="kw">plot.igraph</span>(g, 
            <span class="dt">layout=</span>layout_with_fr,       <span class="co"># how to lay out the graph</span>
            <span class="dt">main=</span><span class="st">&quot;Dictionary distance network&quot;</span>,  <span class="co"># title</span>
            <span class="dt">vertex.label.cex=</span><span class="fl">0.6</span>,         <span class="co"># label size</span>
            <span class="dt">vertex.label.color=</span><span class="st">&quot;black&quot;</span>,   <span class="co"># font color</span>
            <span class="dt">vertex.color=</span>qd.colors[<span class="dv">5</span>],    <span class="co"># vertex color</span>
            <span class="dt">vertex.frame.color=</span><span class="ot">NA</span>,        <span class="co"># no vertex border</span>
            <span class="dt">edge.width=</span><span class="kw">E</span>(g)<span class="op">$</span>weight<span class="op">*</span><span class="dv">100</span>    <span class="co"># scale edges according to their weight </span>
                                          <span class="co"># (since the distances are so small, we multiply)</span>
            )  </code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p>Although this network is similar to the one shown in <a href="configuration.html#network">Section 5.2.2</a> (both undirected and weighted), it displays a totally different kind of information. The networks based on copresence connect characters that appear together on stage, while this network connects characters with similar thematic profile in their speech (within the limits of being able to detect thematic profiles via word fields).</p>
</div>
<div id="development-over-the-course-of-the-play" class="section level2">
<h2><span class="header-section-number">9.4</span> Development over the course of the play</h2>
<p>Finally, the function <code>dictionaryStatistics()</code> can be used to track word field for segments of the play. To do that, we use the parameter <code>segment</code>, and set it to either “Act” or “Scene”.</p>
<div id="individual-characters" class="section level3">
<h3><span class="header-section-number">9.4.1</span> Individual characters</h3>
<p>We can now plot the theme progress over the course of the play. This can be done for specific characters, as shown below.</p>
<pre class="sourceCode r"><code class="sourceCode r">dsl &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(rksp<span class="fl">.0</span>, 
                            <span class="dt">fieldnames=</span><span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>, <span class="st">&quot;Familie&quot;</span>, <span class="st">&quot;Ratio&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Religion&quot;</span>),
                            <span class="dt">normalizeByFigure=</span><span class="ot">TRUE</span>,
                            <span class="dt">segment=</span><span class="st">&quot;Act&quot;</span>)

mat &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dsl[dsl<span class="op">$</span>character<span class="op">==</span><span class="st">&quot;marinelli&quot;</span>,])

<span class="kw">matplot</span>(mat, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">col=</span><span class="st">&quot;black&quot;</span>)
<span class="kw">legend</span>(<span class="dt">x=</span><span class="st">&quot;topleft&quot;</span>,<span class="dt">legend=</span><span class="kw">colnames</span>(mat), <span class="dt">lty=</span><span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(dsl))</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<p>Depending on the use case, it might be easier to interpret if the numbers are cumulatively added up. The snippet below shows how this works.</p>
<pre class="sourceCode r"><code class="sourceCode r">dsl &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(rksp<span class="fl">.0</span>, 
                            <span class="dt">fieldnames=</span><span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>, <span class="st">&quot;Familie&quot;</span>, <span class="st">&quot;Ratio&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Religion&quot;</span>),
                            <span class="dt">normalizeByFigure=</span><span class="ot">TRUE</span>,
                            <span class="dt">segment=</span><span class="st">&quot;Act&quot;</span>) 

mat &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dsl[dsl<span class="op">$</span>character<span class="op">==</span><span class="st">&quot;marinelli&quot;</span>,])

mat &lt;-<span class="st"> </span><span class="kw">apply</span>(mat,<span class="dv">2</span>,cumsum)

<span class="kw">matplot</span>(mat, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">col=</span><span class="st">&quot;black&quot;</span>)

<span class="co"># Add act lines</span>
<span class="kw">abline</span>(<span class="dt">v=</span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(mat))

<span class="kw">legend</span>(<span class="dt">x=</span><span class="st">&quot;topleft&quot;</span>, <span class="dt">legend=</span><span class="kw">colnames</span>(mat), <span class="dt">lty=</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
</div>
<div id="comparing-characters" class="section level3">
<h3><span class="header-section-number">9.4.2</span> Comparing characters</h3>
<p>Simultaneously to the setting above, we now want to compare the development of several characters for a single word field. This unfortunately requires some reshuffling of the data, using the function <code>reshape</code> (from the <code>stats</code> package).</p>
<pre class="sourceCode r"><code class="sourceCode r">dsl &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(rksp<span class="fl">.0</span>, 
                            <span class="dt">fieldnames=</span><span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>),
                            <span class="dt">normalizeByFigure=</span><span class="ot">TRUE</span>,
                            <span class="dt">segment=</span><span class="st">&quot;Act&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(rksp<span class="fl">.0</span>,
         <span class="dt">n =</span> <span class="dv">6</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">format</span>(rksp<span class="fl">.0</span>)

dsl &lt;-<span class="st"> </span><span class="kw">reshape</span>(dsl, <span class="dt">direction =</span> <span class="st">&quot;wide&quot;</span>,  <span class="co"># the table becomes wider</span>
               <span class="dt">timevar =</span> <span class="st">&quot;Number.Act&quot;</span>,   <span class="co"># the column that specifies multiple readings</span>
               <span class="dt">times =</span> <span class="st">&quot;Liebe&quot;</span>,          <span class="co"># the number to distribute</span>
               <span class="dt">idvar=</span><span class="kw">c</span>(<span class="st">&quot;corpus&quot;</span>,<span class="st">&quot;drama&quot;</span>,<span class="st">&quot;character&quot;</span>)   <span class="co"># what identifies a character</span>
)

mat &lt;-<span class="st"> </span><span class="kw">as.matrix.data.frame</span>(dsl[,<span class="dv">4</span><span class="op">:</span><span class="kw">ncol</span>(dsl)])
<span class="kw">rownames</span>(mat) &lt;-<span class="st"> </span>dsl<span class="op">$</span>character
mat &lt;-<span class="st"> </span><span class="kw">apply</span>(mat,<span class="dv">1</span>,cumsum)

<span class="kw">matplot</span>(mat, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">lty =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(mat), <span class="dt">col=</span><span class="st">&quot;black&quot;</span>, <span class="dt">main=</span><span class="st">&quot;Liebe&quot;</span>)
<span class="kw">legend</span>(<span class="dt">x=</span><span class="st">&quot;topleft&quot;</span>, <span class="dt">legend=</span><span class="kw">colnames</span>(mat), <span class="dt">lty=</span><span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(mat))</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
</div>
</div>
<div id="corpus-analysis-1" class="section level2">
<h2><span class="header-section-number">9.5</span> Corpus Analysis</h2>
<p>Finally, we will do word field analysis with a small corpus. The following snippet creates a vector with ids for plays from the <em>Sturm und Drang</em> period. Providing this vector as an argument for the <code>loadDrama()</code> function loads them all as a single <code>QDDrama</code> object. To reproduce this, you will need to install the quadrama corpus first, which can be done by executing <code>installData("qd")</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">sturm_und_drang.ids &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;qd:11f81.0&quot;</span>, <span class="st">&quot;qd:11g1d.0&quot;</span>, <span class="st">&quot;qd:11g9w.0&quot;</span>, 
                         <span class="st">&quot;qd:11hdv.0&quot;</span>, <span class="st">&quot;qd:nds0.0&quot;</span>, <span class="st">&quot;qd:r12k.0&quot;</span>, 
                         <span class="st">&quot;qd:r12v.0&quot;</span>, <span class="st">&quot;qd:r134.0&quot;</span>,  <span class="st">&quot;qd:r13g.0&quot;</span>, 
                         <span class="st">&quot;qd:rfxf.0&quot;</span>,  <span class="st">&quot;qd:rhtz.0&quot;</span>, <span class="st">&quot;qd:rhzq.0&quot;</span>, 
                         <span class="st">&quot;qd:rj22.0&quot;</span>, <span class="st">&quot;qd:tx4z.0&quot;</span>, <span class="st">&quot;qd:tz39.0&quot;</span>, 
                         <span class="st">&quot;qd:tzgk.0&quot;</span>, <span class="st">&quot;qd:v0fv.0&quot;</span>, <span class="st">&quot;qd:wznj.0&quot;</span>, 
                         <span class="st">&quot;qd:tx4z.0&quot;</span>, <span class="st">&quot;qd:rfxf.0&quot;</span>)

sturm_und_drang.plays &lt;-<span class="st"> </span><span class="kw">loadDrama</span>(sturm_und_drang.ids)</code></pre>
<p>The resulting table is reproduced here in readable formatting:</p>
<pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span><span class="kw">kable</span>(sturm_und_drang.plays<span class="op">$</span>meta)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">corpus</th>
<th align="left">drama</th>
<th align="left">documentTitle</th>
<th align="left">language</th>
<th align="left">Name</th>
<th align="left">Pnd</th>
<th align="left">Translator.Name</th>
<th align="left">Translator.Pnd</th>
<th align="right">Date.Written</th>
<th align="right">Date.Printed</th>
<th align="right">Date.Premiere</th>
<th align="left">Date.Translation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">qd</td>
<td align="left">11f81.0</td>
<td align="left">Clavigo</td>
<td align="left">de</td>
<td align="left">Goethe, Johann Wolfgang</td>
<td align="left">118540238</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1774</td>
<td align="right">1774</td>
<td align="right">1774</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">qd</td>
<td align="left">11g1d.0</td>
<td align="left">Götz von Berlichingen mit der eisernen Hand</td>
<td align="left">de</td>
<td align="left">Goethe, Johann Wolfgang</td>
<td align="left">118540238</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">1773</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">qd</td>
<td align="left">11g9w.0</td>
<td align="left">Egmont</td>
<td align="left">de</td>
<td align="left">Goethe, Johann Wolfgang</td>
<td align="left">118540238</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1787</td>
<td align="right">1788</td>
<td align="right">1791</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">qd</td>
<td align="left">11hdv.0</td>
<td align="left">Stella</td>
<td align="left">de</td>
<td align="left">Goethe, Johann Wolfgang</td>
<td align="left">118540238</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1776</td>
<td align="right">1776</td>
<td align="right">1776</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">qd</td>
<td align="left">nds0.0</td>
<td align="left">Ugolino</td>
<td align="left">de</td>
<td align="left">Gerstenberg, Heinrich Wilhelm von</td>
<td align="left">118690949</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">1768</td>
<td align="right">1769</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">qd</td>
<td align="left">r12k.0</td>
<td align="left">Sturm und Drang</td>
<td align="left">de</td>
<td align="left">Klinger, Friedrich Maximilian</td>
<td align="left">118563319</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1776</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">qd</td>
<td align="left">r12v.0</td>
<td align="left">Die Zwillinge</td>
<td align="left">de</td>
<td align="left">Klinger, Friedrich Maximilian</td>
<td align="left">118563319</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">1776</td>
<td align="right">1776</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">qd</td>
<td align="left">r134.0</td>
<td align="left">Die neue Arria</td>
<td align="left">de</td>
<td align="left">Klinger, Friedrich Maximilian</td>
<td align="left">118563319</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">qd</td>
<td align="left">r13g.0</td>
<td align="left">Simsone Grisaldo</td>
<td align="left">de</td>
<td align="left">Klinger, Friedrich Maximilian</td>
<td align="left">118563319</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">qd</td>
<td align="left">rfxf.0</td>
<td align="left">Julius von Tarent</td>
<td align="left">de</td>
<td align="left">Leisewitz, Johann Anton</td>
<td align="left">118571370</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">qd</td>
<td align="left">rhtz.0</td>
<td align="left">Die Soldaten</td>
<td align="left">de</td>
<td align="left">Lenz, Jakob Michael Reinhold</td>
<td align="left">118571656</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1775</td>
<td align="right">1776</td>
<td align="right">1863</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">qd</td>
<td align="left">rhzq.0</td>
<td align="left">Der Hofmeister oder Vorteile der Privaterziehung</td>
<td align="left">de</td>
<td align="left">Lenz, Jakob Michael Reinhold</td>
<td align="left">118571656</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1772</td>
<td align="right">1774</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">qd</td>
<td align="left">rj22.0</td>
<td align="left">Der neue Menoza</td>
<td align="left">de</td>
<td align="left">Lenz, Jakob Michael Reinhold</td>
<td align="left">118571656</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">qd</td>
<td align="left">tx4z.0</td>
<td align="left">Don Carlos, Infant von Spanien</td>
<td align="left">de</td>
<td align="left">Schiller, Friedrich</td>
<td align="left">118607626</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1787</td>
<td align="right">1787</td>
<td align="right">1787</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">qd</td>
<td align="left">tz39.0</td>
<td align="left">Kabale und Liebe</td>
<td align="left">de</td>
<td align="left">Schiller, Friedrich</td>
<td align="left">118607626</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1783</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">qd</td>
<td align="left">tzgk.0</td>
<td align="left">Die Verschwörung des Fiesco zu Genua</td>
<td align="left">de</td>
<td align="left">Schiller, Friedrich</td>
<td align="left">118607626</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1782</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">qd</td>
<td align="left">v0fv.0</td>
<td align="left">Die Räuber</td>
<td align="left">de</td>
<td align="left">Schiller, Friedrich</td>
<td align="left">118607626</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1780</td>
<td align="right">1781</td>
<td align="right">1882</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">qd</td>
<td align="left">wznj.0</td>
<td align="left">Die Kindermörderin</td>
<td align="left">de</td>
<td align="left">Wagner, Heinrich Leopold</td>
<td align="left">11862833X</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">1776</td>
<td align="right">NA</td>
<td align="right">1777</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>For the sake of demo, we will use the <code>base_dictionary</code> that is included in the R package. It contains entries for the fields Familie, Krieg, Ratio, Liebe, Religion. Typing <code>base_dictionary</code> in the R console shows all words in all five fields. For loading other dictionaries, <strong>see above</strong>.</p>
<p>Counting word frequencies on a corpus works exactly as on a single text.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dictionaryStatistics</span>(sturm_und_drang.plays, 
                     <span class="dt">fieldnames=</span><span class="kw">names</span>(base_dictionary), 
                     <span class="dt">byFigure =</span> <span class="ot">FALSE</span>)</code></pre>
<pre><code>##    corpus   drama Familie Krieg Ratio Liebe Religion
## 1      qd 11f81.0     169    48   100   161       48
## 2      qd 11g1d.0     158   188   107   190      143
## 3      qd 11g9w.0     140   184   120   174       80
## 4      qd 11hdv.0     119    27    41   208       77
## 5      qd  nds0.0     293    47    51   126      107
## 6      qd  r12k.0     217    87    68   215       59
## 7      qd  r12v.0     349   143    49   192       65
## 8      qd  r134.0     136    96    92   387       75
## 9      qd  r13g.0      87   164   108   358       77
## 10     qd  rfxf.0     506   168   220   430      160
## 11     qd  rhtz.0     184    55   106    66       46
## 12     qd  rhzq.0     362    77   126   100      115
## 13     qd  rj22.0     218    51    96   116      102
## 14     qd  tx4z.0     604   380   554   748      420
## 15     qd  tz39.0     463   123   196   284      199
## 16     qd  tzgk.0     220   231   159   210      115
## 17     qd  v0fv.0     399   206   227   304      245
## 18     qd  wznj.0     270    37   132    81       95</code></pre>
<p>In order to visualize this in a time line, we need to merge this table with the meta data table. This can be done easily with the <code>merge()</code> function. This function is quite handy in our use cases, as it can merge tables based on values in the table. In our case, we mostly want to merge tables that both have a <code>corpus</code> and <code>drama</code> column. If the two tables have columns with the same name, this is done automatically. Otherwise, one can specify the columns using the arguments <code>by</code>, <code>by.x</code> and/or <code>by.y</code>.</p>
<p>As the data contains three different types of date (written, printed, premiere), and not all plays have all dates, we create an artificial reference date by taking the earliest date possible. This is done using the <code>apply</code> function in the code below, and by taking the minimum value in each row.</p>
<p>After that, the table is ordered by this reference date, and the plotting itself can be done with regular <code>plot()</code> function provided by R.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># count the words (as before)</span>
dstat &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(sturm_und_drang.plays, 
                     <span class="dt">fieldnames=</span><span class="kw">names</span>(base_dictionary), 
                     <span class="dt">byFigure =</span> <span class="ot">FALSE</span>, 
                     <span class="dt">normalizeByFigure =</span> <span class="ot">TRUE</span>)

<span class="co"># merge them with the meta object</span>
dstat &lt;-<span class="st"> </span><span class="kw">merge</span>(dstat, sturm_und_drang.plays<span class="op">$</span>meta)

<span class="co"># for each play, take the earliest date available</span>
<span class="co"># (not all plays have all kinds of date)</span>
dstat<span class="op">$</span>Date.Ref &lt;-<span class="st"> </span><span class="kw">apply</span>(dstat[,<span class="kw">c</span>(<span class="st">&quot;Date.Printed&quot;</span>, <span class="st">&quot;Date.Written&quot;</span>, <span class="st">&quot;Date.Premiere&quot;</span>)], 
                        <span class="dv">1</span>, min, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</code></pre>
<pre><code>## Warning in FUN(newX[, i], ...): kein nicht-fehlendes Argument für min; gebe
## Inf zurück

## Warning in FUN(newX[, i], ...): kein nicht-fehlendes Argument für min; gebe
## Inf zurück

## Warning in FUN(newX[, i], ...): kein nicht-fehlendes Argument für min; gebe
## Inf zurück

## Warning in FUN(newX[, i], ...): kein nicht-fehlendes Argument für min; gebe
## Inf zurück</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># order them by this reference date</span>
dstat &lt;-<span class="st"> </span>dstat[<span class="kw">order</span>(dstat<span class="op">$</span>Date.Ref),]

<span class="co"># plot them</span>
<span class="kw">plot</span>(Liebe <span class="op">~</span><span class="st"> </span>Date.Ref,  <span class="co"># y ~ x</span>
     <span class="dt">data =</span> dstat[dstat<span class="op">$</span>Date.Ref<span class="op">!=</span><span class="ot">Inf</span>,],  <span class="co"># the data set, filtering Inf values</span>
     <span class="dt">pch =</span> <span class="dv">4</span>,           <span class="co"># we print a cross (see ?points for other options)</span>
     <span class="dt">xlab=</span><span class="st">&quot;Year&quot;</span>        <span class="co"># label of the x axis</span>
)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-65-1.png" width="672" /></p>
<p>The resulting plot shows the percentage of <em>love</em>-words in each play, organized by reference date. Thus, in 1776, a very “lovely” play has been published, achieving over 1.8 percent of love words (it’s <em>Stella</em> by Goethe). The identification of plays in this plot can be simplified if we plot not only crosses/points, but some kind of identifier. In the plot below, we use the textgrid id of the play (which we also use in QuaDramA, because it’s relatively short and still memorable).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># it makes use of the text() function much easier if we have</span>
<span class="co"># a new variable for this filtered data set</span>
dstat.filtered &lt;-<span class="st"> </span>dstat[dstat<span class="op">$</span>Date.Ref<span class="op">!=</span><span class="ot">Inf</span>,]

<span class="kw">plot</span>(Liebe <span class="op">~</span><span class="st"> </span>Date.Ref,  <span class="co"># y ~ x</span>
     <span class="dt">data =</span> dstat.filtered, <span class="co"># the data set</span>
     <span class="dt">pch =</span> <span class="dv">4</span>,           <span class="co"># we print a cross (see ?points for other options)</span>
     <span class="dt">xlab=</span><span class="st">&quot;Year&quot;</span>        <span class="co"># label of the x axis</span>
)

<span class="kw">text</span>(<span class="dt">x =</span> dstat.filtered<span class="op">$</span>Date.Ref<span class="op">+</span><span class="dv">1</span>, 
     <span class="dt">y =</span> dstat.filtered<span class="op">$</span>Liebe,
     <span class="dt">labels=</span>dstat.filtered<span class="op">$</span>drama,
     <span class="dt">cex=</span><span class="fl">0.7</span>)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
</div>
<div id="enriching-the-word-fields-distributionally" class="section level2">
<h2><span class="header-section-number">9.6</span> Enriching the word fields distributionally</h2>
<p>TODO: Write text</p>
<pre class="sourceCode r"><code class="sourceCode r">r &lt;-<span class="st"> </span>base_dictionary
<span class="cf">for</span> (f <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(dictionary)) {
  fn &lt;-<span class="st"> </span><span class="kw">names</span>(dictionary)[[f]]
  sims &lt;-<span class="st"> </span>wordVectors<span class="op">::</span><span class="kw">closest_to</span>(model,dictionary[[f]],<span class="dt">n=</span>top,<span class="dt">fancy_names =</span> <span class="ot">FALSE</span>)
  r[[fn]] &lt;-<span class="st"> </span><span class="kw">c</span>(r[[fn]],sims[sims<span class="op">$</span>similarity<span class="op">&gt;=</span>minimalSimilarity,<span class="dv">1</span>])
}</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="stage-directions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advanced-text-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/lunr.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["DramaAnalysis.pdf", "DramaAnalysis.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "static"
}
});
});
</script>

</body>

</html>
